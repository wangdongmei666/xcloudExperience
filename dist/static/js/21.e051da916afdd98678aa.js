webpackJsonp([21],{"0lGq":function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("section",[a("h1",[s._v("不常见问题分析及处理思路")]),s._v(" "),a("br"),s._v(" "),a("h2",{attrs:{id:"yi-dong-tai-jiao-ben-cha-ru-yi-ju-hua-dai-ma"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yi-dong-tai-jiao-ben-cha-ru-yi-ju-hua-dai-ma","aria-hidden":"true"}},[s._v("¶")]),s._v(" 一、动态脚本插入一句话代码")]),s._v(" "),a("br"),s._v(" "),a("p",[a("b",[s._v("        背景：")]),s._v("有些用户觉得加载云适配网站后影响了PC端的加载速度。对于此敏感用户，我们可以使用动态脚本判断当前设备进行一句话代码的添加。")]),s._v(" "),a("pre",{pre:!0},[a("code",{pre:!0,attrs:{class:"hljs language-javascript"}},[s._v("\n\x3c!-- 云适配脚本式的一句话代码添加 --\x3e\n"),a("span",{pre:!0,attrs:{class:"xml"}},[a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("<"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")]),a("span",{pre:!0,attrs:{class:"javascript"}},[s._v("\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" yspInfo = [\n                {\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"script"')]),s._v(",\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("id")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"allmobilize"')]),s._v(",\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("charset")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"utf-8"')]),s._v(",\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("src")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"http://a.yunshipei.com/b2c9c795b09a756251dcab4e67ef4593/allmobilize.min.js"')]),s._v("\n                },\n                {\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"meta"')]),s._v(",\n                        "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"http-equiv"')]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Cache-Control"')]),s._v(",\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(" : "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"no-siteapp"')]),s._v(",\n                },\n                {\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"meta"')]),s._v(",\n                        "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"http-equiv"')]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"Cache-Control"')]),s._v(",\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("content")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"no-transform"')]),s._v("\n                },\n                {\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("name")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"link"')]),s._v(",\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("rel")]),s._v(" : "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"alternate"')]),s._v(",\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("media")]),s._v(" : "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"handheld"')]),s._v(",\n                        "),a("span",{pre:!0,attrs:{class:"hljs-attr"}},[s._v("href")]),s._v(": "),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"#"')]),s._v("\n                }\n        ];\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" nowViewWidth = "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".documentElement.clientWidth;\n\n        "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("(nowViewWidth <= "),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("992")]),s._v("){\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" script = "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createElement(yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].name);\n                script.id = yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].id;\n                script.charset = yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].charset;\n                script.src = yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].src;\n\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" meta1 = "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createElement(yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("].name);\n                meta1.setAttribute("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"http-equiv"')]),s._v(", yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("]["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"http-equiv"')]),s._v("]);\n                meta1.setAttribute("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"content"')]),s._v(", yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("].content);\n\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" meta2 = "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createElement(yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("].name);\n                meta2.setAttribute("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"http-equiv"')]),s._v(", yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("]["),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"http-equiv"')]),s._v("]);\n                meta2.setAttribute("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"content"')]),s._v(", yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("].content);\n\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" link = "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".createElement(yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("].name);\n                link.rel = yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("].rel;\n                link.media = yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("].media;\n                link.href = yspInfo["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("3")]),s._v("].href;\n\n                "),a("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" tar = "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".getElementsByTagName("),a("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"head"')]),s._v(")["),a("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].firstChild;\n\n                "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".head.insertBefore(script,tar);\n                "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".head.insertBefore(meta1,tar);\n                "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".head.insertBefore(meta2,tar);\n                "),a("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("document")]),s._v(".head.insertBefore(link,tar);\n        }\n")]),a("span",{pre:!0,attrs:{class:"hljs-tag"}},[s._v("</"),a("span",{pre:!0,attrs:{class:"hljs-name"}},[s._v("script")]),s._v(">")])]),s._v("\n\n\n")])]),s._v(" "),a("br"),s._v(" "),a("h2",{attrs:{id:"er-tong-shi-man-zu-duo-ge-yu-ming-di-zhi-duan-de-nei-rong-pi-pei"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#er-tong-shi-man-zu-duo-ge-yu-ming-di-zhi-duan-de-nei-rong-pi-pei","aria-hidden":"true"}},[s._v("¶")]),s._v(" 二、同时满足多个域名/地址段的内容匹配")]),s._v(" "),a("p",[a("b",[s._v("        1、问题描述：")]),s._v("PC端某部分内容部署在多个机房，在不同的地址段打开，则跳转到不同的IP地址，但网站本身的DOM结构是一致的。")]),s._v(" "),a("p",[a("b",[s._v("        2、解决方案：")]),s._v("针对这种情况，我们可以在IDE模板中加入匹配多个IP或域名的正则，(/\\w.*)? 就可以都满足了。另外还需要加入域名别名。")]),s._v(" "),a("p",[a("b",[s._v("        3、栗子：")]),s._v("中科院继续教育网 (/\\w.*)?/\\list")])])}]},n=a("VU/8")(null,r,!1,null,null,null);t.default=n.exports},w11s:function(s,t,a){s.exports=a("0lGq")}});
//# sourceMappingURL=21.e051da916afdd98678aa.js.map