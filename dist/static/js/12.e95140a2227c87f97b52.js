webpackJsonp([12],{QYYO:function(s,a,r){s.exports=r("h97a")},h97a:function(s,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("section",[t("h1",[s._v("动态数据采集问题处理")]),s._v(" "),t("br"),s._v(" "),t("p",[s._v("        前言："),t("br")]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"yi-pc-duan-lun-bo-tu-dong-tai-shu-ju-chu-li-han-shu-feng-zhuang"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yi-pc-duan-lun-bo-tu-dong-tai-shu-ju-chu-li-han-shu-feng-zhuang","aria-hidden":"true"}},[s._v("¶")]),s._v(" 一、PC端轮播图动态数据处理函数封装")]),s._v(" "),t("br"),s._v(" "),t("p",[t("b",[s._v("        1、PC端数据及效果预览")])]),s._v(" "),t("br"),s._v(" "),t("p",[t("img",{attrs:{src:r("rFou"),alt:"规范9",title:"规范"}})]),s._v(" "),t("br"),s._v(" "),t("p",[t("b",[s._v("        2、自定义API中的数据预处理函数封装")])]),s._v(" "),t("br"),s._v(" "),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{class:"hljs language-javascript"}},[s._v("    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("/*\n     * 动态bannerJS数据预处理\n     * @str string 参数说明： 需要处理的字符串 【必须】 为数据采集的.outerHTML()的script字符串\n     * @key string 参数说明： 关键字 【必须】 为需要处理的关键字节点 \n     * @num number 参数说明： 需要截取的图片个数\n    **/")]),s._v("\n    jsBannerPress : "),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("str,key,num")]),s._v(")")]),s._v("{\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" newStr;\n        "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("( "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("typeof")]),s._v("(str) === "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"string"')]),s._v(" && str != "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(" && str != "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("null")]),s._v(" && str != "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(" ){\n            "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 1、对接收的字符串进行预处理,截取{  } 部分 返回数组格式的字符串")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" newStr = str.split("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"{"')]),s._v(")["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("].split("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"}"')]),s._v(")["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].split(key)["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].split("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('";"')]),s._v(");\n            \n            "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 2、声明图片数组、链接数组、描述数组")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" data = {\n                "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'status'")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"success"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'msg'")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"成功！"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'data'")]),s._v(": {\n                    "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'jsCodeImgUrl'")]),s._v(" : [],\n                    "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'jsCodeHref'")]),s._v(" : [],\n                    "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'jsCodeDesc'")]),s._v(" : []         \n                }\n            };\n            "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 3、循环遍历处理")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("for")]),s._v("( "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" j = "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("; j < newStr.length; j++){\n                "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("( j < num ){\n                    "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" alljsCode = newStr[j].trim() != "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(" ? newStr[j].split("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'u_u6_icn.addimg('")]),s._v(")["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("].split("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("', \"\")'")]),s._v(")["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].split("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('","')]),s._v(") : "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(";\n                    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 预览版环境下需要进行原PC域名的拼接")]),s._v("\n                    alljsCode["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("] != "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(" ? data.data.jsCodeImgUrl.push( alljsCode["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("0")]),s._v("].replace("),t("span",{pre:!0,attrs:{class:"hljs-regexp"}},[s._v('/\\\\|\\"/g')]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(") ) : "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(";\n                    alljsCode["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("] != "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(" ? data.data.jsCodeHref.push( alljsCode["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v("].replace("),t("span",{pre:!0,attrs:{class:"hljs-regexp"}},[s._v('/\\\\|\\"/g')]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(") ) : "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(";\n                    alljsCode["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("] != "),t("span",{pre:!0,attrs:{class:"hljs-literal"}},[s._v("undefined")]),s._v(" ? data.data.jsCodeDesc.push( alljsCode["),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("2")]),s._v("].replace("),t("span",{pre:!0,attrs:{class:"hljs-regexp"}},[s._v('/\\\\|\\"/g')]),s._v(","),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(") ) : "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('""')]),s._v(";\n                }   \n            }\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" data;    \n        }"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v("{ "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 报错处理")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" data = {\n                "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'status'")]),s._v(": "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"error"')]),s._v(",\n                "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'msg'")]),s._v(" : "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"只接收字符串类型的值"')]),s._v("\n            };\n            "),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" data;\n        }\n    }\n\n")])]),s._v(" "),t("br"),s._v(" "),t("p",[t("b",[s._v("        3、数据采集中的函数调用及报错处理")])]),s._v(" "),t("br"),s._v(" "),t("pre",{pre:!0},[t("code",{pre:!0,attrs:{class:"hljs language-javascript"}},[s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("/*\n *  轮播图动态脚本数据预处理\n*/")]),s._v(" \n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 1、获取banner动态数据脚本 str")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" JsCode = $("),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'.smbanner .lt script'")]),s._v(").eq("),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("1")]),s._v(").outerHTML();\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 2、调用banner动态脚本处理函数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" newStr = context._helpers.jsBannerPress( JsCode , "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v("'u_u6_icn.changeimg(0);'")]),s._v(" , "),t("span",{pre:!0,attrs:{class:"hljs-number"}},[s._v("7")]),s._v(" );\n\n"),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 3、对返回值进行判断")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" newData;\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("if")]),s._v("( newStr.status == "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"success"')]),s._v(" ){\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log( newStr.data );\n    "),t("span",{pre:!0,attrs:{class:"hljs-comment"}},[s._v("// 对返回值进行重新赋值：值类型为对象类型")]),s._v("\n    newData = newStr.data;\n    \n}"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("else")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".error( newStr.msg );\n}\n\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("var")]),s._v(" content = [];\n!(!newData) && $(newData.jsCodeImgUrl).each("),t("span",{pre:!0,attrs:{class:"hljs-function"}},[t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("function")]),s._v("("),t("span",{pre:!0,attrs:{class:"hljs-params"}},[s._v("i")]),s._v(") ")]),s._v("{\n    "),t("span",{pre:!0,attrs:{class:"hljs-built_in"}},[s._v("console")]),s._v(".log( i );\n    content.push({\n        "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"img"')]),s._v(": newData.jsCodeImgUrl[i],\n        "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"link"')]),s._v(": newData.jsCodeHref[i],\n        "),t("span",{pre:!0,attrs:{class:"hljs-string"}},[s._v('"desc"')]),s._v(": newData.jsCodeDesc[i]\n    });\n});\n"),t("span",{pre:!0,attrs:{class:"hljs-keyword"}},[s._v("return")]),s._v(" content;\n\n")])]),s._v(" "),t("br"),s._v(" "),t("h2",{attrs:{id:"er"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#er","aria-hidden":"true"}},[s._v("¶")]),s._v(" 二、")]),s._v(" "),t("br")])}]},n=r("VU/8")(null,t,!1,null,null,null);a.default=n.exports},rFou:function(s,a,r){s.exports=r.p+"static/img/bd.7190b90.jpg"}});
//# sourceMappingURL=12.e95140a2227c87f97b52.js.map